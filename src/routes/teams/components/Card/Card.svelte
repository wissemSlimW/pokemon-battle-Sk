<script lang="ts">
	import type { Pokemon } from '$lib/types/pokemon';
	import type { Team } from '$lib/types/team';
	import './style.css';
	export let handleDelete: () => void;
	export let handleUpdate: () => void;
	export let team: Team;
	export let pokemon: Pokemon[];
	const getPower = () => team.pokemon?.reduce((acc, cur) => acc + cur.power, 0);
</script>

<div class="team-card">
	<div class="card rounded-4 overflow-hidden d-flex flex-column h-100 px-2 py-4 gap-3">
		<span class="d-flex justify-content-center text-center">
			<h3>{team.name}</h3>
		</span>
		<div class="d-flex justify-content-center">
			<span class="badge text-bg-light fs-3 rounded-5"
				>{getPower()}

				<svg
					width="30"
					height="30"
					viewBox="-3.04 -3.04 22.08 22.08"
					fill="none"
					xmlns="http://www.w3.org/2000/svg"
				>
					<g id="SVGRepo_bgCarrier" stroke-width="0" />

					<g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" />

					<g id="SVGRepo_iconCarrier">
						<path d="M3 0L6.58579 3.58579L3.58579 6.58579L0 3V0H3Z" fill="#000000" />
						<path
							d="M6.70711 12.2929L8.20711 13.7929L6.79289 15.2071L4.5 12.9142L2.99771 14.4165C2.99923 14.4441 3 14.472 3 14.5C3 15.3284 2.32843 16 1.5 16C0.671573 16 0 15.3284 0 14.5C0 13.6716 0.671573 13 1.5 13C1.52802 13 1.55586 13.0008 1.5835 13.0023L3.08579 11.5L0.792893 9.20711L2.20711 7.79289L3.70711 9.29289L13 0H16V3L6.70711 12.2929Z"
							fill="#000000"
						/>
						<path
							d="M14.5 16C13.6716 16 13 15.3284 13 14.5C13 14.472 13.0008 14.4441 13.0023 14.4165L10.0858 11.5L13.7929 7.79289L15.2071 9.20711L12.9142 11.5L14.4165 13.0023C14.4441 13.0008 14.472 13 14.5 13C15.3284 13 16 13.6716 16 14.5C16 15.3284 15.3284 16 14.5 16Z"
							fill="#000000"
						/>
					</g>
				</svg>
			</span>
		</div>
		<div class="flex-grow-1 d-flex gap-2 justify-content-center flex-wrap">
			{#each pokemon as item}
				<img
					class="overflow-hidden rounded-circle avatar border border-light border-5"
					src={item.image}
					alt="Pokemon avatar"
				/>
			{/each}
		</div>
		<div class="d-flex justify-content-center gap-2">
			<button type="button" on:click={handleUpdate} class="btn btn-primary rounded-3">
				<svg
					width="20"
					height="20"
					viewBox="0 0 24 24"
					xmlns="http://www.w3.org/2000/svg"
					fill="none"
				>
					<path
						fill="currentColor"
						fill-rule="evenodd"
						d="M15.586 3a2 2 0 0 1 2.828 0L21 5.586a2 2 0 0 1 0 2.828L19.414 10 14 4.586 15.586 3zm-3 3-9 9A2 2 0 0 0 3 16.414V19a2 2 0 0 0 2 2h2.586A2 2 0 0 0 9 20.414l9-9L12.586 6z"
						clip-rule="evenodd"
					/>
				</svg>
				update
			</button>
			<button
				on:click={handleDelete}
				type="button"
				class="btn btn-danger d-flex align-items-center gap-1 rounded-3"
			>
				<svg
					width="20"
					height="20"
					viewBox="0 0 24 24"
					fill="none"
					xmlns="http://www.w3.org/2000/svg"
				>
					<path
						d="M18 6L17.1991 18.0129C17.129 19.065 17.0939 19.5911 16.8667 19.99C16.6666 20.3412 16.3648 20.6235 16.0011 20.7998C15.588 21 15.0607 21 14.0062 21H9.99377C8.93927 21 8.41202 21 7.99889 20.7998C7.63517 20.6235 7.33339 20.3412 7.13332 19.99C6.90607 19.5911 6.871 19.065 6.80086 18.0129L6 6M4 6H20M16 6L15.7294 5.18807C15.4671 4.40125 15.3359 4.00784 15.0927 3.71698C14.8779 3.46013 14.6021 3.26132 14.2905 3.13878C13.9376 3 13.523 3 12.6936 3H11.3064C10.477 3 10.0624 3 9.70951 3.13878C9.39792 3.26132 9.12208 3.46013 8.90729 3.71698C8.66405 4.00784 8.53292 4.40125 8.27064 5.18807L8 6M14 10V17M10 10V17"
						stroke="currentColor"
						stroke-width="2"
						stroke-linecap="round"
						stroke-linejoin="round"
					/>
				</svg>
				Delete
			</button>
		</div>
	</div>
</div>
